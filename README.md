# x402-devkit

A development toolkit for the x402 protocol. `x402-devkit` provides auto-generated wallets and a quick setup for building buyer and seller integrations on the Base Sepolia testnet.

It works as both:
- **ğŸ“š A TypeScript library** - Import classes and utilities in your codebase (recommended)
- **ğŸ”§ A CLI tool** - Scaffold projects and manage wallets from the command line

## ğŸ“¦ Installation

```bash
# As a library dependency
npm install x402-devkit

# As a global CLI tool
npm install -g x402-devkit
```

## ğŸ“š Library Usage (Recommended)

### Basic Setup

```typescript
import { X402DevKit } from "x402-devkit";

const devkit = new X402DevKit();
const wallet = await devkit.getWallet();
console.log("Wallet address:", wallet.address);
```

### Check Balances

```typescript
const balances = await devkit.getBalances();
console.log("ETH:", balances.eth);
console.log("USDC:", balances.usdc);

if (await devkit.needsFunding()) {
  await devkit.showFundingInstructions();
}
```

### Buyer Example

```typescript
import { withPaymentInterceptor } from "x402-axios";
import axios from "axios";

const devkit = new X402DevKit();
const wallet = await devkit.getWallet();

const client = withPaymentInterceptor(axios.create({ timeout: 30000 }), wallet);

const response = await client.get("https://api.example.com/paid-endpoint");
```

### Seller Example

```typescript
import express from "express";
import { paymentMiddleware } from "x402-express";

const devkit = new X402DevKit();
const wallet = await devkit.getWallet();

const app = express();
app.use(
  paymentMiddleware(wallet.address, {
    "/api/data": { price: "$0.01", network: "base-sepolia" },
  })
);
```

## ğŸ› ï¸ CLI Usage

### Initialize x402 in an existing project

```bash
cd your-project
x402-devkit init
```

### Create a new x402 project

```bash
x402-devkit create my-x402-app
cd my-x402-app
npm run fund
npm run dev
```

### Check wallet status and get funding

```bash
x402-devkit fund
```

### CLI Commands

#### `x402-devkit init`
Initialize x402 in an existing Node.js project:
- Creates encrypted development wallet
- Updates `.env` with wallet credentials
- Adds necessary entries to `.gitignore`
- Provides funding instructions

#### `x402-devkit create <name>`
Create a new x402 project from scratch:
- Scaffolds complete project structure
- Installs all dependencies
- Generates wallet and configuration
- Includes buyer and seller examples

#### `x402-devkit fund`
Check wallet balances and show funding instructions:
- Displays current ETH and USDC balances
- Shows funding status and requirements
- Provides links to testnet faucets
- Copies wallet address to clipboard

## ğŸ”§ Configuration

### Options

```typescript
interface X402DevKitOptions {
  walletPath?: string; // Custom wallet file path
  network?: "base-sepolia"; // Network selection
}

const devkit = new X402DevKit({
  walletPath: "./custom-wallet.json",
  network: "base-sepolia",
});
```

### Environment Variables

```bash
# Auto-generated by x402-devkit init
X402_PRIVATE_KEY=0x...
X402_WALLET_ADDRESS=0x...
```

## ğŸŒ Network Information

This package works with **Base Sepolia** testnet:

- **Chain ID**: 84532
- **RPC URL**: https://sepolia.base.org
- **Explorer**: https://sepolia.basescan.org
- **USDC Contract**: 0x036CbD53842c5426634e7929541eC2318f3dCF7e

### Minimum Requirements

- **ETH**: 0.01 ETH (for gas fees)
- **USDC**: 0.1 USDC (for payments)

## ğŸ“‹ Features

- **ğŸ”‘ Auto-generated wallets** - Secure, encrypted development wallets with cryptographic entropy
- **ğŸ’° Funding assistance** - Built-in faucet links and balance checking for Base Sepolia
- **ğŸ—ï¸ Project scaffolding** - Complete project templates with buyer/seller examples
- **ğŸ”§ CLI tools** - Simple commands for initialization and wallet management
- **ğŸ“š TypeScript library** - Importable classes and utilities for programmatic use
- **ğŸ§ª Testing support** - Comprehensive test suite with unit and integration tests

## ğŸ”’ Security

### Development Wallets

- Wallets are **encrypted** using AES-256-GCM
- Generated with **cryptographic entropy** from multiple sources
- Automatically **gitignored** to prevent commits
- **Development only** - never use for real funds

### Best Practices

- Keep `.x402/` directory in `.gitignore`
- Never commit `.env` files
- Use different wallets for different environments
- Monitor wallet balances regularly

## ğŸ§ª Development

### Setup

```bash
git clone https://github.com/gaurangtorvekar/x402-devkit
cd x402-devkit
npm install
```

### Scripts

```bash
npm run build          # Build TypeScript
npm run dev           # Run CLI in development
npm test              # Run test suite
npm run test:watch    # Watch mode testing
npm run test:coverage # Coverage report
npm run lint          # Run linter
```

### Testing

```bash
# Unit tests
npm test -- --testPathPattern="unit"

# Integration tests
npm test -- --testPathPattern="integration"

# Coverage report
npm run test:coverage
```

## ğŸ“ Project Structure

```
x402-devkit/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ cli/              # CLI commands
â”‚   â”œâ”€â”€ lib/              # Core library
â”‚   â”‚   â”œâ”€â”€ config/       # Constants and configuration
â”‚   â”‚   â”œâ”€â”€ wallet/       # Wallet management
â”‚   â”‚   â”œâ”€â”€ faucet/       # Funding instructions
â”‚   â”‚   â””â”€â”€ index.ts      # Main X402DevKit class
â”‚   â””â”€â”€ __tests__/        # Test suite
â”œâ”€â”€ templates/            # Project scaffolding templates
â”œâ”€â”€ .github/workflows/    # CI/CD
â””â”€â”€ dist/                 # Built output
```

## ğŸ¤ Contributing

1. Fork the repository
2. Create your feature branch (`git checkout -b feature/amazing-feature`)
3. Commit your changes (`git commit -m 'Add amazing feature'`)
4. Push to the branch (`git push origin feature/amazing-feature`)
5. Open a Pull Request

### Development Guidelines

- Use TypeScript with strict mode
- Follow existing code style and patterns
- Add tests for new features
- Update documentation as needed
- Ensure all tests pass

## ğŸ› Issues & Support

- [Report issues](https://github.com/gaurangtorvekar/x402-devkit/issues)
- [View x402 documentation](https://x402.org)
- [Join discussions](https://github.com/gaurangtorvekar/x402-devkit/discussions)

## ğŸ“„ License

MIT License - see [LICENSE](LICENSE) file for details.

## ğŸ¯ Roadmap

- [ ] Additional network support (Ethereum mainnet, Polygon)
- [ ] Enhanced wallet management (multiple wallets, import/export)
- [ ] Integration with popular frameworks (Next.js, React)
- [ ] Advanced testing utilities
- [ ] Performance optimizations
- [ ] Enhanced CLI features

---

Built with â¤ï¸ by Gaurang Torvekar